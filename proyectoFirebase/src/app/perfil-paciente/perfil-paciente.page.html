
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Perfil de paciente</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="fondo">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">PerfilPaciente</ion-title>
    </ion-toolbar>

  </ion-header>

<ion-breadcrumbs>
  <ion-breadcrumb 
    *ngFor="let breadcrumb of breadcrumbs; let last = last"
    [class.active]="last"
    [style.cursor]="last ? 'default' : 'pointer'"
    [style.opacity]="last ? '0.7' : '1'"
    (click)="!last && onBreadcrumbClick(breadcrumb)">
    {{ breadcrumb.label }}
  </ion-breadcrumb>
</ion-breadcrumbs>



<ion-grid>
  <ion-row>
    
    <ion-col>
      
<ion-item *ngIf="patient">
  <ion-avatar slot="start">
    <img [src]="'https://picsum.photos/80/80?random=' + patient.idpaciente" alt="avatar" />
  </ion-avatar>
  <ion-label>{{ patient.nombrePaciente }}</ion-label>
</ion-item>

<!-- Loading state -->
<ion-item *ngIf="isLoading">
  <ion-avatar slot="start">
    <ion-spinner name="crescent"></ion-spinner>
  </ion-avatar>
  <ion-label>Cargando datos del paciente...</ion-label>
</ion-item>

<!-- No patient data -->
<ion-item *ngIf="!patient && !isLoading">
  <ion-avatar slot="start">
    <img src="https://ionicframework.com/docs/img/demos/avatar.svg" alt="default" />
  </ion-avatar>
  <ion-label>No se encontraron datos del paciente</ion-label>
</ion-item>
    </ion-col>
  </ion-row>
</ion-grid>

<ion-grid *ngIf="patient">
  <ion-row>
    <ion-col>
      <img [src]="'https://picsum.photos/300/200?random=' + patient.idpaciente" alt="patient" />
    </ion-col>
    <ion-col>
      <div class="card">
      <ion-card>
      <ion-card-header>
      <ion-card-title>Perfil de paciente</ion-card-title>
      <ion-card-subtitle>{{ patient.nombrePaciente }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
        <ion-item>
          <ion-label>
            <h3>RUT</h3>
            <p>{{ patient.rut }}</p>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="patient.genero">
          <ion-label>
            <h3>Género</h3>
            <p>{{ patient.genero }}</p>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="patient.fechaNacimiento">
          <ion-label>
            <h3>Fecha de Nacimiento</h3>
            <p>{{ patient.fechaNacimiento | date:'dd/MM/yyyy' }}</p>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="patient.direccion">
          <ion-label>
            <h3>Dirección</h3>
            <p>{{ patient.direccion }}</p>
          </ion-label>
        </ion-item>
        </ion-list>
      </ion-card-content>
      </ion-card>
      </div>
      <ion-button expand="block" size="large" (click)="irAFichaMedica()">Ir a ficha médica</ion-button >
    </ion-col>
    <ion-col>

    </ion-col>
  </ion-row>
</ion-grid>

<!-- Loading state for entire content -->
<div *ngIf="isLoading && !patient" class="loading-container">
  <ion-spinner name="crescent"></ion-spinner>
  <p>Cargando información del paciente...</p>
</div>

<!-- Toast for error messages -->
<ion-toast
  [isOpen]="showToast"
  [message]="toastMessage"
  [color]="toastColor"
  [duration]="3000"
  (didDismiss)="onToastDismiss()">
</ion-toast>


</ion-content>




